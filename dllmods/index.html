<!DOCTYPE html>
<html>
<head>
    <title>Cave Story DLL downloads</title>
    <style>
        body {
            background-color: black;
        }
		h1 {
		  color: white;
		  font-family: courier;
		  font-size: 120%;
		  text-align:center;
		}
		h2 {
		  color: white;
		  font-family: courier;
		  font-size: 120%;
		  text-align:center;
		}
		h3 {
		  color: white;
		  font-family: courier;
		  font-size: 120%;
		  text-align:center;
		}
		p {
		  color: white;
		  font-family: courier;
		  font-size: 100%;
		  text-align:center;
		}
        a {
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>~ Cave Story DLLs ~</h1>

    <!-- Autumns API (AutPI) -->
    <h2>-- Autumns API (AutPI) --</h2>
    <p>This allows for other dll code mods to inject code into the game.<br>This also includes the <a href="https://modcavestory.github.io/" style="color: cyan">ModCS</a> lua api.<br><br>You only need the tables if you are adding new weapons or carets.</p>
    <p id="autpi"></p>

    <!-- Autumns Various Additions -->
    <h2>-- Autumns Various Additions --</h2>
    <p>This adds lots of new features into Cave Story.<br>New entities, New tiles, New TSC commands, etc.<br>Chances are if you need some form of command, it may be in here.</p>
	<p>This mod requires <a style="color: lime">AutPI</a>.</p>
    <p id="ava"></p>

    <!-- FMOD Audio -->
    <h2>-- FMOD Audio --</h2>
    <p>This adds the <a href="https://www.fmod.com/" style="color: cyan">FMOD Audio Engine</a> into Cave Story.<br>You can use fmod events, with music progression and such in your mods.</p>
	<p>This mod requires <a style="color: lime">AutPI</a>.</p>
    <p id="fmod"></p>

    <!-- Pause Menu -->
    <h2>-- Pause Menu --</h2>
    <p>This dll adds a CSE2 style pause screen.<br>Other dlls can also use it to add their own pause menu buttons or options.</p>
	<p>This mod requires <a style="color: lime">AutPI</a>.</p>
    <p id="pause"></p>

    <!-- SDL2 -->
    <h2>-- SDL2 --</h2>
    <p>This dll was made originally by periwinkle.<br>This dll replaces the vanilla DirectDraw rendering system in favor of<br>SDL2, which supports png graphics and should be supported on Windows 11.<br><br>My version of this dll includes more than the normal 40 surface limit, as well as<br>ways for other dlls to inject code into a spot in StartDirectDraw, and toggleable framerate options.<br>It also features a new font swapping feature, and rebinding Keyboard and Controller controls in-game.</p>
	<p>This mod requires <a style="color: lime">AutPI</a>.</p>
    <p>This mod optionally supports <a style="color: lime">Pause Menu</a>.</p>
    <p id="sdl"></p>

    <!-- Lighting -->
    <h2>-- Lighting --</h2>
    <p>This dll adds the lighting from Bionicobots "Red Sands" / jakev's "ModEngine" into Cave Story.</p>
	<p>This mod requires <a style="color: lime">AutPI</a>.</p>
	<p>This mod requires <a style="color: lime">SDL2</a>.</p>
    <p id="lighting"></p>

    <!-- Layers -->
    <h2>-- Layers --</h2>
    <p>This dll was originally made by periwinkle.<br>This dll adds the Boosters Lab "layers" mode into Cave Story, allowing for 4 unique layers for map tiles.<br><br>My version of this dll adds animated tiles support.</p>
	<p>This mod requires <a style="color: lime">AutPI</a>.</p>
    <p id="layers"></p>
	
	<!-- Freeware Online -->
	<h2>-- Online Netplay --</h2>
	<p>This dll adds Ghost-Multiplayer style netplay into Cave Story, originally based on CSE2-Onlines code by CuckyDev.</p>
	<p>This mod requires <a style="color: lime">AutPI</a>.</p>
	<p>Server Software:</p>
	<p id="onlineServer"></p>
	<p>Cave Story DLL:</p>
	<p id="onlineClient"></p>

    <!-- Important Links -->
    <h3>~ Important Links ~ </h3>
    <p><a href="../index.html" style="color: cyan">Main Site</a></p>

    <script>
        const repos = {
            autpi: "autumn-mnya/autumns-api",
            ava: "autumn-mnya/autumns-various-additions",
            fmod: "autumn-mnya/fmod-cave-story",
            pause: "autumn-mnya/cavestory-pause-mod",
            sdl: "autumn-mnya/sdl2-cave-story",
            lighting: "autumn-mnya/sdl-lighting-cs",
            layers: "autumn-mnya/layers-dll",
			onlineServer: "autumn-mnya/CS-Netplay-Dll-Server",
			onlineClient: "autumn-mnya/Freeware-Online"
        };

        async function fetchReleases(repo) {
            const url = `https://api.github.com/repos/${repo}/releases`;
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`Failed to fetch releases for ${repo}`);
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error(error);
                return null;
            }
        }

        async function updateDownloadLinks() {
            for (const mod in repos) {
                const releases = await fetchReleases(repos[mod]);
                let downloadLinks = "";
                if (releases) {
                    if (releases.length > 0) {
                        const latestRelease = releases[0];
                        const tagName = latestRelease.tag_name;
                        const sourceCodeLink = `<a href="${latestRelease.tarball_url}" style="color: yellow">Source Code</a>`;
                        downloadLinks += `Latest Release: ${tagName} (${sourceCodeLink})<br>`;
                        latestRelease.assets.forEach(asset => {
                            const downloadLink = `<a href="${asset.browser_download_url}" style="color: cyan">${asset.name}</a>`;
                            downloadLinks += `${downloadLink}<br>`;
                        });
                    } else {
                        downloadLinks += `<a href="https://github.com/${repos[mod]}" style="color: red">GitHub Repository</a><br>`;
                    }
                } else {
                    downloadLinks += `<a href="https://github.com/${repos[mod]}" style="color: red">GitHub Repository</a><br>`;
                }
                document.getElementById(mod).innerHTML = downloadLinks;
            }
        }

        updateDownloadLinks();
    </script>
</body>
</html>
