<!DOCTYPE html>
<html>
<head>
    <title>Arms Level Table Editor</title>
    <script>
        let armsTable = [];

        function loadFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const buffer = new DataView(e.target.result);
                armsTable = [];

                for (let i = 0; i < buffer.byteLength; i += 12) {
                    armsTable.push([
                        buffer.getInt32(i, true),
                        buffer.getInt32(i + 4, true),
                        buffer.getInt32(i + 8, true)
                    ]);
                }
                updateTable();
            };
            reader.readAsArrayBuffer(file);
        }

        function updateTable() {
            const table = document.getElementById("armsTable");
            table.innerHTML = "<tr><th>Level 1</th><th>Level 2</th><th>Level 3</th><th>Action</th></tr>";

            armsTable.forEach((row, index) => {
                const tr = document.createElement("tr");
                row.forEach((value, i) => {
                    const td = document.createElement("td");
                    const input = document.createElement("input");
                    input.type = "number";
                    input.value = value;
                    input.onchange = () => armsTable[index][i] = parseInt(input.value);
                    td.appendChild(input);
                    tr.appendChild(td);
                });
                const actionTd = document.createElement("td");
                const delButton = document.createElement("button");
                delButton.textContent = "Remove";
                delButton.onclick = () => { armsTable.splice(index, 1); updateTable(); };
                actionTd.appendChild(delButton);
                tr.appendChild(actionTd);
                table.appendChild(tr);
            });
        }

        function addEntry() {
            armsTable.push([0, 0, 0]);
            updateTable();
        }

        function saveFile() {
            const buffer = new ArrayBuffer(armsTable.length * 12);
            const view = new DataView(buffer);
            armsTable.forEach((row, index) => {
                view.setInt32(index * 12, row[0], true);
                view.setInt32(index * 12 + 4, row[1], true);
                view.setInt32(index * 12 + 8, row[2], true);
            });

            const blob = new Blob([buffer], { type: "application/octet-stream" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "arms_level.tbl";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</head>
<body>
    <h1>Arms Level Table Editor</h1>
    <input type="file" onchange="loadFile(event)"><br><br>
    <table id="armsTable" border="1">
        <tr><th>Level 1</th><th>Level 2</th><th>Level 3</th><th>Action</th></tr>
    </table>
    <button onclick="addEntry()">Add Entry</button>
    <button onclick="saveFile()">Save Table</button>
    <p>Note: Generated by ChatGPT cause lazy, not very polished.</p>
</body>
</html>
